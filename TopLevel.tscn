[gd_scene load_steps=11 format=3 uid="uid://bbqeon55s1eio"]

[ext_resource type="Script" path="res://SubViewport.gd" id="1_tgwg2"]
[ext_resource type="PackedScene" uid="uid://b5h6i6q8wvrja" path="res://dragon/dragon-char.tscn" id="2_jt7t1"]
[ext_resource type="TileSet" uid="uid://cp1v3s7q7gj7f" path="res://tileset1.tres" id="3_5wvxv"]
[ext_resource type="PackedScene" uid="uid://cvqbm443qlmcj" path="res://UI/stamina_meter.tscn" id="3_vygst"]
[ext_resource type="PackedScene" uid="uid://cglucrb04ft0q" path="res://floor.tscn" id="4_l1ft5"]
[ext_resource type="Script" path="res://ParallaxSprite2D.cs" id="4_v7r3v"]

[sub_resource type="Gradient" id="Gradient_6kpoj"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_pb50w"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_5q2v0"]
width = 1000
height = 1000
seamless = true
color_ramp = SubResource("Gradient_6kpoj")
noise = SubResource("FastNoiseLite_pb50w")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vbhxx"]
size = Vector2(1184, 672)

[node name="TopLevel" type="Node2D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
offset_right = 40.0
offset_bottom = 40.0

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
render_target_update_mode = 4
script = ExtResource("1_tgwg2")

[node name="Dragon" parent="SubViewportContainer/SubViewport" instance=ExtResource("2_jt7t1")]
z_index = 2
position = Vector2(456, -2488)
INIT_GLIDE_SPEED = 250.0

[node name="floor" parent="SubViewportContainer/SubViewport" instance=ExtResource("4_l1ft5")]
position = Vector2(1856, -2008)

[node name="TileMap" type="TileMap" parent="SubViewportContainer/SubViewport"]
tile_set = ExtResource("3_5wvxv")
format = 2
layer_0/tile_data = PackedInt32Array(589824, 2, 1, 589825, 2, 0, 589826, 2, 2, 589827, 2, 2, 589828, 2, 1, 589829, 2, 1, 589830, 2, 0, 589831, 2, 0, 589832, 2, 2, 589833, 2, 1, 589834, 2, 2, 589835, 2, 0, 589836, 2, 2, 589837, 2, 1, 589838, 2, 0, 589839, 2, 0, 589840, 2, 2, 589841, 2, 0, 524305, 2, 0, 524304, 2, 1, 524303, 2, 2, 524302, 2, 2, 524301, 2, 1, 524300, 2, 2, 524299, 2, 1, 524298, 2, 0, 524297, 2, 1, 524296, 2, 2, 524295, 2, 0, 524294, 2, 2, 524293, 2, 0, 524292, 2, 0, 524291, 2, 0, 524290, 2, 0, 524289, 2, 2, 524288, 2, 2, 458752, 131074, 0, 458753, 131074, 0, 458754, 131074, 0, 458755, 131074, 0, 458756, 65538, 2, 458757, 2, 1, 393221, 131074, 0, 393222, 131074, 0, 393223, 131074, 0, 393224, 131074, 0, 393225, 131074, 0, 393226, 131074, 0, 458762, 2, 0, 458763, 131074, 2, 458764, 131074, 0, 458765, 131074, 0, 458766, 131074, 0, 458767, 131074, 0, 458768, 131074, 0, 458769, 131074, 0, 458770, 393218, 0, 458771, 393218, 0, 458772, 393218, 0, 458773, 458754, 0, 458758, 2, 2, 458759, 2, 1, 458760, 2, 1, 458761, 2, 0, 393220, 65538, 1, 393227, 131074, 1, 524287, 327682, 2, 589823, 2, 0, 655359, 2, 2, 655358, 2, 2, 589822, 2, 1, 524286, 2, 2, 458750, 2, 2, 393214, 2, 0, 327678, 2, 0, 262142, 2, 0, 196606, 2, 2, 131070, 2, 2, 65534, 2, 2, -2, 2, 0, -65538, 2, 2, -131074, 2, 0, -196610, 2, 2, -262146, 2, 1, -327682, 2, 0, -393217, 2, 1, -458753, 2, 0, -524289, 2, 1, -589825, 2, 2, -655361, 2, 0, -786433, 2, 2, -720897, 2, 2, -851969, 2, 2, -917505, 2, 1, -983041, 2, 1, -1048577, 2, 2, -1114113, 2, 2, -1179649, 2, 0, -1245185, 2, 2, -1310721, 2, 2, -1376257, 2, 0, -1441793, 2, 1, -1507329, 2, 2, -1572865, 2, 2, -1638401, 2, 1, -1769472, 2, 0, -1835008, 2, 1, -1900544, 2, 1, -1769473, 2, 0, -1703937, 2, 1, -1835009, 2, 0, -1900545, 2, 2, -1966081, 2, 2, -2097152, 2, 0, -2162688, 2, 0, -2228224, 2, 0, -2293760, 2, 2, -2359296, 2, 0, -2424832, 2, 0, -2490368, 131074, 0, -2555904, 2, 0, -2621440, 2, 0, -2424833, 458754, 1, -2359297, 2, 1, -2293761, 2, 0, -2228225, 2, 2, -2162689, 2, 1, -2031617, 2, 1, -2097153, 2, 0, -1966080, 2, 0, -2031616, 2, 0, -2293759, 2, 2, -2359295, 2, 0, -2424831, 2, 2, -2424830, 2, 1, -2424829, 2, 0, -2424828, 2, 2, -2424827, 2, 1, -2424826, 2, 2, -2490362, 131074, 0, -2490361, 131074, 0, -2490360, 131074, 0, -2490359, 131074, 0, -2490358, 131074, 0, -2424822, 2, 1, -2293750, 2, 0, -2293751, 2, 2, -2293752, 2, 0, -2359288, 2, 1, -2359289, 2, 1, -2424824, 2, 0, -2424823, 2, 2, -2424825, 2, 0, -2359292, 2, 0, -2359293, 2, 2, -2359294, 2, 1, -2293755, 2, 0, -2293754, 2, 1, -2293753, 2, 0, -2359286, 2, 2, -2359287, 2, 0, -2359290, 2, 1, -2359291, 2, 2, -2293758, 2, 1, -2293757, 2, 0, -2293756, 2, 2, -1834998, 2, 0, -1769462, 2, 2, -1703926, 2, 2, -1638390, 2, 0, -1572854, 2, 2, -1507317, 2, 1, -1441781, 2, 1, -1376245, 2, 0, -1310709, 2, 2, -1245173, 2, 2, -1179637, 2, 2, -1114101, 2, 1, -1114102, 2, 1, -1048566, 2, 1, -983030, 2, 1, -983031, 2, 0, -917495, 2, 1, -851959, 2, 0, -786424, 2, 0, -720888, 2, 1, -655352, 2, 0, -589816, 2, 1, -589817, 2, 2, -524281, 2, 1, -458745, 2, 0, -393209, 2, 2, -327673, 2, 1, -65523, 2, 2, -131059, 2, 0, -196595, 2, 0, -262131, 2, 1, -327666, 2, 0, -393202, 2, 0, -458738, 2, 0, -589810, 2, 1, -524274, 2, 0, -655345, 2, 1, -720881, 2, 2, -786417, 2, 1, -851953, 2, 1, -851952, 2, 1, -917488, 2, 0, -983024, 2, 0, -1048559, 2, 0, -1114095, 2, 1, -1179630, 2, 1, -1245166, 2, 0, -1310702, 2, 2, -1376238, 2, 0, -1441774, 2, 1, -1507310, 2, 2, -1572846, 2, 2, -1638382, 2, 2, -1703918, 2, 2, -1769454, 2, 1, -1834990, 2, 2, -327674, 2, 2, -393210, 2, 2, -458746, 2, 0, -524282, 2, 2, -589818, 2, 1, -655354, 2, 0, -655353, 2, 0, -720889, 2, 2, -786425, 2, 2, -851961, 2, 2, -851960, 2, 1, -917496, 2, 1, -983032, 2, 2, -1048568, 2, 0, -1048567, 2, 2, -1114103, 2, 2, -1179639, 2, 2, -1179638, 2, 0, -1245174, 2, 0, -1310710, 2, 2, -1376246, 2, 1, -1441782, 2, 1, -1507318, 2, 1, -1507319, 2, 0, -1572855, 2, 2, -1638391, 2, 2, -1703927, 2, 1, -1769463, 2, 0, -1834999, 2, 0, -1900535, 2, 1, -1966071, 65538, 0, -1966070, 131074, 0, -1900534, 2, 2, -1900533, 2, 0, -1900527, 458754, 1, -1900526, 131074, 0, -1900525, 524290, 1, -2490357, 524290, 1, -2490363, 393218, 0, -2490364, 393218, 0, -2490365, 393218, 0, -2490366, 393218, 0, -2490367, 131074, 0, -1572853, 2, 0, -1179631, 2, 2, -1048560, 2, 1, -917489, 2, 1, -1245167, 2, 1, -1114094, 2, 1, -1048558, 2, 1, -983022, 2, 2, -983023, 2, 1, -917487, 2, 0, -1048570, 2, 2, -1114106, 2, 0, -1179642, 2, 0, -1245178, 2, 0, -1310714, 131074, 0, -1310715, 131074, 0, -1245179, 2, 1, -1179643, 2, 0, -1114107, 2, 1, -1048571, 2, 1, -1048572, 2, 0, -1114108, 2, 0, -1179644, 2, 0, -1245180, 2, 2, -1310716, 131074, 0, -1048569, 2, 1, -1114105, 2, 2, -1179641, 2, 2, -1245177, 2, 0, -1310713, 196610, 0, -1048573, 2, 0, -1114109, 2, 1, -1179645, 2, 1, -1245181, 2, 1, -1310717, 65538, 0, -1048549, 2, 1, -1114085, 2, 1, -1179621, 2, 0, -1245157, 2, 1, -1310693, 2, 1, -1048550, 2, 2, -1114086, 2, 2, -1179622, 2, 1, -1245158, 2, 1, -1310694, 2, 0, -1048551, 2, 1, -1114087, 2, 2, -1179623, 2, 1, -1245159, 2, 2, -1310695, 2, 2, -1048552, 2, 0, -1114088, 2, 0, -1179624, 2, 0, -1245160, 2, 1, -1310696, 2, 0, -1048553, 2, 0, -1114089, 2, 0, -1179625, 2, 0, -1245161, 2, 2, -1310697, 2, 0, -1114080, 2, 1, -1179616, 2, 0, -1114081, 2, 2, -1179617, 2, 1, -1114082, 2, 2, -1179618, 2, 1, -1638389, 2, 0, -1703925, 2, 1, -1769461, 2, 1, -1834997, 2, 2, -1245175, 2, 1, -1310711, 2, 2, -1376247, 2, 0, -1441783, 2, 1, -327672, 2, 2, -393208, 2, 0, -458744, 2, 0, -524280, 2, 0, -720890, 2, 2, -786426, 2, 1, -851962, 2, 1, -655343, 2, 0, -720879, 2, 1, -786415, 2, 1, -851951, 2, 2, -655344, 2, 0, -720880, 2, 0, -786416, 2, 1, -1966069, 196610, 0, -1376229, 524290, 1, -1376230, 131074, 0, -1376231, 131074, 0, -1376232, 131074, 0, -1376233, 65538, 0, -1245152, 524290, 1, -1245153, 327682, 2, -1245154, 458754, 1, -655346, 524290, 0, -327667, 524290, 0, -983025, 524290, 0, -1114096, 524290, 0, -1310703, 524290, 0)

[node name="JupiterBackground" type="Sprite2D" parent="SubViewportContainer/SubViewport"]
z_index = -10
texture_filter = 2
texture_repeat = 2
position = Vector2(0, -20)
scale = Vector2(0.5, 0.5)
texture = SubResource("NoiseTexture2D_5q2v0")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 512, 512)
script = ExtResource("4_v7r3v")
ScrollSpeed = Vector2(1.5, 1.5)

[node name="Area2D" type="Area2D" parent="SubViewportContainer/SubViewport"]
gravity_space_override = 2
gravity_point_center = Vector2(1, 0)
gravity_direction = Vector2(1, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="SubViewportContainer/SubViewport/Area2D"]
position = Vector2(592, -1312)
shape = SubResource("RectangleShape2D_vbhxx")

[node name="UI" type="Node2D" parent="."]

[node name="StaminaMeter" parent="UI" instance=ExtResource("3_vygst")]
position = Vector2(512, 320)

[connection signal="stamina_depleted" from="SubViewportContainer/SubViewport/Dragon" to="UI/StaminaMeter" method="_on_dragon_stamina_depleted"]
